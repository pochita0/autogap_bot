import { Opportunity, OpportunityDetail } from '../types/opportunity';

// Generate 20 dummy opportunities
export const dummyOpportunities: Opportunity[] = [
  {
    id: '1',
    type: 'SPOT_SPOT_HEDGE',
    base: 'BTC',
    quote: 'USDT',
    buyExchange: 'Upbit',
    sellExchange: 'Binance',
    futuresExchange: 'Binance',
    buyPrice: 59800,
    sellPrice: 60500,
    futuresPrice: 60450,
    grossGapPct: 1.17,
    netProfitPct: 0.85,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 15,
    estCostUsd: 8.5,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 1500000,
  },
  {
    id: '2',
    type: 'SPOT_FUTURES',
    base: 'ETH',
    quote: 'USDT',
    buyExchange: 'Binance',
    futuresExchange: 'Binance',
    buyPrice: 2245,
    futuresPrice: 2262,
    grossGapPct: 0.76,
    netProfitPct: 0.52,
    fundingRate: -0.01,
    nextFundingAt: new Date(Date.now() + 2 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 2.5,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 850000,
  },
  {
    id: '3',
    type: 'SPOT_SPOT_HEDGE',
    base: 'XRP',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Upbit',
    futuresExchange: 'Binance',
    buyPrice: 0.523,
    sellPrice: 0.542,
    futuresPrice: 0.524,
    grossGapPct: 3.63,
    netProfitPct: 2.85,
    commonNetworks: 0,
    walletStatusOk: false,
    routeType: 'BRIDGE',
    estTimeMins: 25,
    estCostUsd: 15.2,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 120000,
  },
  {
    id: '4',
    type: 'SPOT_SPOT_HEDGE',
    base: 'SOL',
    quote: 'USDT',
    buyExchange: 'Bybit',
    sellExchange: 'Bithumb',
    futuresExchange: 'Bybit',
    buyPrice: 95.2,
    sellPrice: 97.8,
    futuresPrice: 95.5,
    grossGapPct: 2.73,
    netProfitPct: 1.95,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 12,
    estCostUsd: 6.8,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 320000,
  },
  {
    id: '5',
    type: 'SPOT_FUTURES',
    base: 'BTC',
    quote: 'USDT',
    buyExchange: 'Bybit',
    futuresExchange: 'Bybit',
    buyPrice: 59950,
    futuresPrice: 60250,
    grossGapPct: 0.50,
    netProfitPct: 0.28,
    fundingRate: 0.005,
    nextFundingAt: new Date(Date.now() + 4 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 3.2,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 2100000,
  },
  {
    id: '6',
    type: 'SPOT_SPOT_HEDGE',
    base: 'MATIC',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Upbit',
    futuresExchange: 'Binance',
    buyPrice: 0.852,
    sellPrice: 0.875,
    futuresPrice: 0.854,
    grossGapPct: 2.70,
    netProfitPct: 1.88,
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 8,
    estCostUsd: 4.5,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 180000,
  },
  {
    id: '7',
    type: 'SPOT_FUTURES',
    base: 'DOGE',
    quote: 'USDT',
    buyExchange: 'OKX',
    futuresExchange: 'OKX',
    buyPrice: 0.0823,
    futuresPrice: 0.0831,
    grossGapPct: 0.97,
    netProfitPct: 0.68,
    fundingRate: -0.015,
    nextFundingAt: new Date(Date.now() + 1 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 1.2,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 95000,
  },
  {
    id: '8',
    type: 'SPOT_SPOT_HEDGE',
    base: 'ADA',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Bithumb',
    futuresExchange: 'Binance',
    buyPrice: 0.435,
    sellPrice: 0.448,
    futuresPrice: 0.437,
    grossGapPct: 2.99,
    netProfitPct: 2.12,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 10,
    estCostUsd: 5.1,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 210000,
  },
  {
    id: '9',
    type: 'SPOT_FUTURES',
    base: 'AVAX',
    quote: 'USDT',
    buyExchange: 'Binance',
    futuresExchange: 'Binance',
    buyPrice: 34.2,
    futuresPrice: 34.5,
    grossGapPct: 0.88,
    netProfitPct: 0.61,
    fundingRate: -0.008,
    nextFundingAt: new Date(Date.now() + 3 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 2.8,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 420000,
  },
  {
    id: '10',
    type: 'SPOT_SPOT_HEDGE',
    base: 'DOT',
    quote: 'USDT',
    buyExchange: 'Bybit',
    sellExchange: 'Upbit',
    futuresExchange: 'Bybit',
    buyPrice: 6.85,
    sellPrice: 7.12,
    futuresPrice: 6.88,
    grossGapPct: 3.94,
    netProfitPct: 3.05,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 18,
    estCostUsd: 7.8,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 155000,
  },
  {
    id: '11',
    type: 'SPOT_SPOT_HEDGE',
    base: 'LINK',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Bithumb',
    futuresExchange: 'Binance',
    buyPrice: 14.52,
    sellPrice: 14.89,
    futuresPrice: 14.55,
    grossGapPct: 2.55,
    netProfitPct: 1.72,
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 11,
    estCostUsd: 6.2,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 280000,
  },
  {
    id: '12',
    type: 'SPOT_FUTURES',
    base: 'SOL',
    quote: 'USDT',
    buyExchange: 'OKX',
    futuresExchange: 'OKX',
    buyPrice: 95.5,
    futuresPrice: 96.2,
    grossGapPct: 0.73,
    netProfitPct: 0.48,
    fundingRate: 0.003,
    nextFundingAt: new Date(Date.now() + 5 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 3.5,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 520000,
  },
  {
    id: '13',
    type: 'SPOT_SPOT_HEDGE',
    base: 'ATOM',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Upbit',
    futuresExchange: 'Binance',
    buyPrice: 9.24,
    sellPrice: 9.52,
    futuresPrice: 9.27,
    grossGapPct: 3.03,
    netProfitPct: 2.18,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 14,
    estCostUsd: 6.5,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 175000,
  },
  {
    id: '14',
    type: 'SPOT_FUTURES',
    base: 'ARB',
    quote: 'USDT',
    buyExchange: 'Bybit',
    futuresExchange: 'Bybit',
    buyPrice: 1.125,
    futuresPrice: 1.138,
    grossGapPct: 1.16,
    netProfitPct: 0.87,
    fundingRate: -0.012,
    nextFundingAt: new Date(Date.now() + 6 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 1.8,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 240000,
  },
  {
    id: '15',
    type: 'SPOT_SPOT_HEDGE',
    base: 'FLOW',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Upbit',
    futuresExchange: 'Binance',
    buyPrice: 0.5234,
    sellPrice: 0.5354,
    futuresPrice: 0.5250,
    grossGapPct: 2.29,
    netProfitPct: 1.58,
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 20,
    estCostUsd: 5.8,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 85000,
  },
  {
    id: '16',
    type: 'SPOT_SPOT_HEDGE',
    base: 'UNI',
    quote: 'USDT',
    buyExchange: 'OKX',
    sellExchange: 'Bithumb',
    futuresExchange: 'OKX',
    buyPrice: 5.82,
    sellPrice: 6.01,
    futuresPrice: 5.85,
    grossGapPct: 3.26,
    netProfitPct: 2.38,
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 13,
    estCostUsd: 7.2,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 195000,
  },
  {
    id: '17',
    type: 'SPOT_FUTURES',
    base: 'MATIC',
    quote: 'USDT',
    buyExchange: 'Binance',
    futuresExchange: 'Binance',
    buyPrice: 0.854,
    futuresPrice: 0.862,
    grossGapPct: 0.94,
    netProfitPct: 0.66,
    fundingRate: -0.006,
    nextFundingAt: new Date(Date.now() + 7 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 2,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 2.1,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 310000,
  },
  {
    id: '18',
    type: 'SPOT_SPOT_HEDGE',
    base: 'FTM',
    quote: 'USDT',
    buyExchange: 'Binance',
    sellExchange: 'Upbit',
    futuresExchange: 'Binance',
    buyPrice: 0.342,
    sellPrice: 0.353,
    futuresPrice: 0.344,
    grossGapPct: 3.22,
    netProfitPct: 2.35,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 16,
    estCostUsd: 6.9,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 125000,
  },
  {
    id: '19',
    type: 'SPOT_FUTURES',
    base: 'LTC',
    quote: 'USDT',
    buyExchange: 'OKX',
    futuresExchange: 'OKX',
    buyPrice: 72.5,
    futuresPrice: 73.1,
    grossGapPct: 0.83,
    netProfitPct: 0.57,
    fundingRate: 0.002,
    nextFundingAt: new Date(Date.now() + 2.5 * 60 * 60 * 1000).toISOString(),
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 0,
    estCostUsd: 2.9,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 380000,
  },
  {
    id: '20',
    type: 'SPOT_SPOT_HEDGE',
    base: 'ALGO',
    quote: 'USDT',
    buyExchange: 'Bybit',
    sellExchange: 'Bithumb',
    futuresExchange: 'Bybit',
    buyPrice: 0.152,
    sellPrice: 0.158,
    futuresPrice: 0.153,
    grossGapPct: 3.95,
    netProfitPct: 3.08,
    commonNetworks: 1,
    walletStatusOk: true,
    routeType: 'DIRECT',
    estTimeMins: 17,
    estCostUsd: 7.5,
    updatedAt: new Date().toISOString(),
    volume24hUsd: 92000,
  },
];

// Detailed opportunity for modal (we'll generate this on-demand later)
export function getOpportunityDetail(id: string): OpportunityDetail | null {
  const opp = dummyOpportunities.find(o => o.id === id);
  if (!opp) return null;

  // Extend with detailed information
  return {
    ...opp,
    legs: {
      spotBuy: {
        market: `${opp.base}-${opp.quote}`,
        priceRef: 'ask',
        volume24h: opp.volume24hUsd * 0.4,
        estSlippageBps: 5,
      },
      spotSell: opp.sellPrice ? {
        market: `${opp.base}-${opp.quote}`,
        priceRef: 'bid',
        volume24h: opp.volume24hUsd * 0.6,
        estSlippageBps: 4,
      } : undefined,
      futuresShort: opp.futuresPrice ? {
        market: `${opp.base}-${opp.quote}-PERP`,
        priceRef: 'mark',
        markPrice: opp.futuresPrice,
        indexPrice: opp.futuresPrice * 0.999,
      } : undefined,
    },
    transferRoute: {
      routeType: opp.routeType,
      destRequiredNetworkId: opp.routeType === 'BRIDGE' ? 'XRP' : undefined,
      commonNetworks: opp.routeType === 'DIRECT' ? ['ETH-ERC20', 'BSC-BEP20'] : undefined,
      steps: opp.routeType === 'DIRECT'
        ? [
            {
              type: 'CEX_WITHDRAW',
              fromNetworkId: 'ETH-ERC20',
              estTimeMins: opp.estTimeMins * 0.3,
              estCostUsd: opp.estCostUsd * 0.8,
              required: true,
            },
            {
              type: 'CEX_DEPOSIT_WAIT',
              toNetworkId: 'ETH-ERC20',
              estTimeMins: opp.estTimeMins * 0.7,
              estCostUsd: 0,
              required: true,
            },
          ]
        : [
            {
              type: 'CEX_WITHDRAW',
              fromNetworkId: 'BSC-BEP20',
              estTimeMins: 3,
              estCostUsd: 1.2,
              required: true,
            },
            {
              type: 'BRIDGE_TRANSFER',
              fromNetworkId: 'BSC-BEP20',
              toNetworkId: 'XRP',
              providerId: 'BRIDGE_X',
              estTimeMins: opp.estTimeMins - 8,
              estCostUsd: opp.estCostUsd - 1.2,
              required: true,
            },
            {
              type: 'CEX_DEPOSIT_WAIT',
              toNetworkId: 'XRP',
              estTimeMins: 5,
              estCostUsd: 0,
              required: true,
            },
          ],
      estTotalTimeMins: opp.estTimeMins,
      estTotalCostUsd: opp.estCostUsd,
      riskFlags: opp.routeType === 'BRIDGE' ? ['BRIDGE_CONTRACT_RISK', 'LIQUIDITY_RISK'] : [],
    },
    profitBreakdown: {
      grossPct: opp.grossGapPct,
      tradingFeesPct: 0.3,
      withdrawFeePct: 0.08,
      bridgeCostPct: opp.routeType === 'BRIDGE' ? 0.25 : undefined,
      slippagePct: 0.09,
      timeRiskPct: opp.routeType === 'BRIDGE' ? 0.15 : 0.05,
      netPct: opp.netProfitPct,
    },
  };
}
